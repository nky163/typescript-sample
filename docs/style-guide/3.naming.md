# 命名

プロジェクト全体で一貫した命名を行い、型システムやスコープが既に伝えてくれる情報を重複して名前に埋め込まない。

---

### 型情報や可視性などから判断できる情報を名前に埋め込まない

- TypeScript の型/修飾子 (private / readonly / 型注釈) が意味を伝えるため接頭辞/接尾辞は不要
- Hungarian 記法や型名サフィックスは冗長でリファクタ時の負債になる
- `I` 接頭辞の interface などは用途の意図を弱める

**❌ bad**

```typescript
interface IUserInterface { /* ... */ }
class TodoItemClass {}
let strUserName: string;
private internalCount: number = 0; // 可視性は private で十分
function fetchTodoListAsync(): Promise<Todo[]> { /* Promise は名前に書かない */ }
```

**✅ good**

```typescript
interface TodoItemStorage { /* 保存形式を表す意図 */ }
class TodoItem {}
let userName: string;
private count = 0;
async function fetchTodoList(): Promise<Todo[]> { /* async で十分 */ }
```

### 先頭アンダースコアは原則禁止（未使用“パラメータ”表示の例外のみ許容）

- 原則: 変数 / フィールド / import エイリアス / 関数名での先頭 `_` や末尾 `_`、単独 `_` は使用しない
- 例外 (唯一許可): インターフェース実装やオーバーライドで「引数が必要だが使わない」ことを示す未使用パラメータに限り `_<name>` を許容
- 未使用ローカル変数は削除する（ `_var` にしない ）
- import の型 / 値に `_Type` など付けない（型と値は名前空間が分かれており混同防止目的の接頭辞は不要）
- 可視性や “使わない” 意図は記号ではなく構造 (private / 実装 / ESLint) で表現する

**❌ bad**

```typescript
class Counter {
  private _value = 0; // フィールドに先頭 _
  increment(_step: number) {
    // _step を未使用にしているが value も _ なので混在
    this._value++;
  }
}
import { AccountId as _AccountId } from '../account'; // import alias に _
const _ = require('lodash'); // 単独 _
let _temp = compute(); // 未使用なら削除する
```

**✅ good**

```typescript
class Counter {
  private value = 0;
  increment(_unusedStep: number): void {
    // インターフェース保持で未使用: 例外として許容
    this.value++;
  }
}
import { AccountId } from '../account';
// 未使用ローカルは作らない / すぐ削除
```

補足:

- ESLint 設定: 未使用“引数”のみ `^_` を無視対象 (argsIgnorePattern)。ローカル変数の `^_` 無視設定 (varsIgnorePattern) は置かない。
- `_` 単独識別子は使用禁止（可読性と検索性低下）。

### 説明的で具体的な名前を使う（短命スコープのみ例外的に短縮可）

- 第三者にも意味が伝わる語を選ぶ
- 曖昧 / 独自略語 / 途中削りは避ける
- 極小スコープなら一文字や極短名 (i, v など) を許容

**❌ bad**

```typescript
let nErr = 0; // 曖昧
let cstmrId = '...'; // 途中削り
let wgcConnections: number; // 独自略語
for (let d of data) {
  /* d の意味不明 */
}
```

**✅ good**

```typescript
let errorCount = 0;
let customerId = '...';
let dnsConnectionIndex = 1;
for (let i of data) {
  /* 3行以内のループ: i 許容 */
}
```

### 略語・頭字語は単語として扱い CamelCase に統一

- 過度な全大文字は読みにくい (`HTTPURL` など)
- プラットフォーム由来など既知の例外 (XMLHttpRequest) はそのまま

**❌ bad**

```typescript
function loadHTTPURL() {}
class OAuthAPIClient {}
```

**✅ good**

```typescript
function loadHttpUrl() {}
class OauthApiClient {}
```

### Interface 名は用途を表し `I` 接頭辞を付けない

- `I` は抽象的で意図が伝わらない
- 目的ベースの命名 (Storage, Repository, Props など) は役割を明示できる

**❌ bad**

```typescript
interface IUser {}
interface IConfig {}
```

**✅ good**

```typescript
interface User {}
interface AppConfig {}
interface UserStorage {
  save(user: User): Promise<void>;
}
```

### 型パラメータは単一大文字または UpperCamelCase

- 慣例化された `T`, `K`, `V`, `E` などを使用する
- 特別な意味がある場合は UpperCamelCase で具体化 (`Result`, `Item`) して理解を助ける

**❌ bad**

```typescript
function map<typeElement>(arr: typeElement[]): typeElement[] {
  return arr;
}
```

**✅ good**

```typescript
function map<T>(arr: T[]): T[] {
  return arr;
}
function paginate<Item>(items: Item[]): Page<Item> {
  /* ... */
}
```

### 定数は不変意図なら `CONSTANT_CASE`（グローバル / static readonly のみ）

- 大文字スネークは「書き換えないで良い/想定しない」シグナル
- 局所スコープで再生成されうる値は `lowerCamelCase`
- enum の個々の値も不変意図を伝えるため `CONSTANT_CASE` とする

**❌ bad**

```typescript
const TimeoutMilliseconds = 5000; // 意図は定数だが形式不統一
let MAX_COUNT = 3; // 変更されるなら NG
```

**✅ good**

```typescript
const DEFAULT_TIMEOUT_MS = 5_000;
class RetryPolicy {
  private static readonly MAX_RETRY_COUNT = 3;
  execute() {
    /* ... */
  }
}
enum AccountStatus {
  ACTIVE = 'active',
  SUSPENDED = 'suspended',
}
let currentRetry = 0; // 変化する値は camelCase
```

### ローカル別名(エイリアス)は元のシンボル形式を踏襲し `const` / `readonly` を付ける

- 変更されないことを明示し誤代入を防止
- 大文字小文字を変えてしまうと検索性が落ちる

**❌ bad**

```typescript
import { SomeHeavyType } from './types';
let sht = SomeHeavyType; // 省略し過ぎ+可変
```

**✅ good**

```typescript
import { SomeHeavyType } from './types';
const SomeHeavyTypeAlias = SomeHeavyType; // 形式維持
```

### テスト名 (xUnit 形式) は日本語で、テスト内容が理解できるように記述する

- シナリオ記述の可読性が向上
- プロダクションコードとは明確に区別

**❌ bad**

```typescript
test('testLoginWhenPasswordWrongDoesError', () => {
  /* ... */
});
```

**✅ good**

```typescript
test('パスワードを間違えた場合、ログインがエラーとなること', () => {
  /* ... */
});
```

### ケース規則サマリ（簡易表）

- UpperCamelCase: クラス / インタフェース / 型エイリアス / enum / デコレータ / 型パラメータ（複語）
- lowerCamelCase: 変数 / 関数 / メソッド / プロパティ / namespace import / \*.ts ファイル名（既存 kebab-case は段階的に改名）
- CONSTANT_CASE: モジュールレベル定数, static readonly 定数, enum 値
- `#private` / `__double__` など特殊構文は禁止

**❌ bad**

```typescript
class user_service {}
const retryCount = 3; // 変更しないつもりなら CONSTANT_CASE へ
enum status {
  Idle,
}
```

**✅ good**

```typescript
class UserService {}
const MAX_RETRY_COUNT = 3;
enum Status {
  Idle,
}
```
